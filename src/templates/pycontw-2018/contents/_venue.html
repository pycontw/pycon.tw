{% extends 'contents/_base.html' %}

{% load static %}

{% block styles %}
{{ block.super  }}
<link rel="stylesheet" type="text/x-scss" href="{% static 'pycontw-2018/styles/venue.scss' %}">
{% endblock styles %}

{% block content %}
<section class="google-map">
	<div class="map-info">
		{% block map_info %}{% endblock map_info %}
	</div>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />

	<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">

	<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

	<div id="mapid"></div>

</section>
{% endblock content %}

{% block extra_js %}

{{ block.super }}

<script>
//icon樣式
var pyIcon = L.icon({
	iconUrl: 'https://i.imgur.com/AwHZfrC.png',
	iconSize: [32, 32],
	iconAnchor: [16, 16]
});
//圖層group
var venue = L.layerGroup();
//點位的樣式，並指定所屬圖層
L.marker([25.040997, 121.611417], {
	icon: pyIcon
}).addTo(venue)
.bindTooltip("中央研究院 人文社會科學館", {
	offset: [0, 11],
	permanent: 'True',
	direction: 'bottom'
}).openTooltip();
//底圖來源資訊
var mbAttr1 = 'Tiles &copy; <a href="http://stamen.com" target="_blank" rel="noopener">Stamen Design</a>, and <a href="https://www.mapbox.com/" target="_blank" rel="noopener">Mapbox</a>. Data &copy; <a href="http://openstreetmap.org" target="_blank" rel="noopener">OpenStreetMap</a> contributors.', mbUrl1 = 'http://{s}.sm.mapstack.stamen.com/((toner-background,$fff[@20],$002660[hsl-color]),(toner-lines,$fff[@10],$3b097b[hsl-color])[@90],(buildings,$fff[@20],$002660[hsl-color])[@20],(toner-labels,$fff[@40],$b2b1dc[hsl-color]))/{z}/{x}/{y}.png', mbAttr2 = 'Maps &copy; <a href="http://www.thunderforest.com" target="_blank" rel="noopener">Thunderforest</a>, Data &copy; <a href="http://www.openstreetmap.org/copyright" target="_blank" rel="noopener">OpenStreetMap </a> contributors.', mbUrl2 = 'https://{s}.tile.thunderforest.com/transport/{z}/{x}/{y}.png?apikey=6170aad10dfd42a38d4d8c709a536f38';

var stamen = L.tileLayer(mbUrl1, {
	attribution: mbAttr1
}),

transport = L.tileLayer(mbUrl2, {
	attribution: mbAttr2
});
//初始化地圖
var pymap = L.map('mapid', {
	center: [25.040997, 121.611417],
	zoom: 12,
	layers: [stamen, venue]
});
//圖層清單與功能
var baseLayers = {
	"Stamen": stamen,
	"Transport": transport
};
var overlays = {
	"會場點位": venue
};
L.control.layers(baseLayers, overlays).addTo(pymap);
</script>
{% endblock extra_js %}
