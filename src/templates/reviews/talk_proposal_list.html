{% extends 'dashboard_base.html' %}

{% load i18n crispy_forms_tags %}

{% block dashboard_tablist %}
{% include '_includes/dashboard_tablist.html' with active='review' %}
{% endblock dashboard_tablist %}

{% block main-content %}

<div class="review-stage">
    <h3 class="dashboard-header">
    	<span class="header__title">
    		{% blocktrans %}Current Review Stage: {{ review_stage }}{% endblocktrans %}
    	</span>
    </h3>
    <div class="stage-desc">
        {% include review_stage_desc_tpl %}
        <p>{% blocktrans %}
        Note that at anytime, the identity of the reviewer, e.g. you, is hidden to
        other reviewers and speakers.  For more information about the whole review
        process, please refer to the google doc
        <a href="https://goo.gl/EPlUZx" target="_blank">Review Guideline</a>.
        {% endblocktrans %}</p>
    </div>
</div>

<div class="review-statistics">
    <div class="col-lg-3 col-md-6 panel-box">
        <div class="panel panel-default">
          <div class="panel-heading text-center">Strong Accept (+1)</div>
          <div class="panel-body text-center">{{ score.strong_accept }}</div>
        </div>
    </div>
    <div class="col-lg-3 col-md-6 panel-box">
        <div class="panel panel-default">
          <div class="panel-heading text-center">Weakly Accept (+0)</div>
          <div class="panel-body text-center">{{ score.weakly_accept }}</div>
        </div>
    </div>
    <div class="col-lg-3 col-md-6 panel-box">
        <div class="panel panel-default">
          <div class="panel-heading text-center">Weakly Reject (-0)</div>
          <div class="panel-body text-center">{{ score.weakly_reject }}</div>
        </div>
    </div>
    <div class="col-lg-3 col-md-6 panel-box">
        <div class="panel panel-default">
          <div class="panel-heading text-center">Strong Reject (-1)</div>
          <div class="panel-body text-center">{{ score.strong_reject }}</div>
        </div>
    </div>
</div>

<!-- Nav tabs -->
<ul class="nav nav-tabs reviews-tabs" role="tablist">
    <li role="presentation" class="active"><a href="#unreviewed" aria-controls="unreviewed" role="tab" data-toggle="tab">{% trans 'Unreviewed Talk Proposals' %} ({{ object_list|length }})</a></li>
    <li role="presentation"><a href="#reviewed" aria-controls="reviewed" role="tab" data-toggle="tab">{% trans 'Reviewed Talk Proposals' %} ({{ reviews|length }})</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="unreviewed">
        <div class="talk-proposals proposals">
        {% if object_list.exists %}
          {% include 'reviews/_includes/proposal_table.html' with user=user proposals=object_list %}
        {% else %}
          <p>{% blocktrans %}You have reviewed all talk proposals.{% endblocktrans %}</p>
        {% endif %}
        </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="reviewed">
        <div class="talk-proposals proposals">
        {% if reviews.exists %}
          {% include 'reviews/_includes/review_table.html' with user=user reviews=reviews %}
        {% else %}
          <p>{% blocktrans %}You haven't reviewed any talk proposals.{% endblocktrans %}</p>
        {% endif %}
        </div>
    </div>
</div>

{% endblock main-content %}
